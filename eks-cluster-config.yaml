apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: eks-kiro-demo
  region: us-west-2
  version: "1.31"

# Enable CloudWatch logging
cloudWatch:
  clusterLogging:
    enableTypes:
      ["api", "audit", "authenticator", "controllerManager", "scheduler"]

# Managed node group configuration
managedNodeGroups:
  - name: kiro-demo-nodes
    instanceType: m5.large
    desiredCapacity: 3
    minSize: 1
    maxSize: 5
    volumeSize: 20

    # Tags for the nodes
    tags:
      Environment: demo
      Project: kiro-eks-workshop

    # IAM policies for the nodes
    iam:
      withAddonPolicies:
        autoScaler: true
        ebs: true
        cloudWatch: true
